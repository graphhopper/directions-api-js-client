(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
function Emitter(t){if(t)return mixin(t)}function mixin(t){for(var e in Emitter.prototype)t[e]=Emitter.prototype[e];return t}"undefined"!=typeof module&&(module.exports=Emitter),Emitter.prototype.on=Emitter.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},Emitter.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r,s=0;s<i.length;s++)if(r=i[s],r===e||r.fn===e){i.splice(s,1);break}return this},Emitter.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks["$"+t];if(i){i=i.slice(0);for(var r=0,s=i.length;r<s;++r)i[r].apply(this,e)}return this},Emitter.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},Emitter.prototype.hasListeners=function(t){return!!this.listeners(t).length};

},{}],2:[function(_dereq_,module,exports){
function noop(){}function serialize(e){if(!isObject(e))return e;var t=[];for(var r in e)pushEncodedKeyValuePair(t,r,e[r]);return t.join("&")}function pushEncodedKeyValuePair(e,t,r){if(null!=r)if(Array.isArray(r))r.forEach(function(r){pushEncodedKeyValuePair(e,t,r)});else if(isObject(r))for(var s in r)pushEncodedKeyValuePair(e,t+"["+s+"]",r[s]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));else null===r&&e.push(encodeURIComponent(t))}function parseString(e){for(var t,r,s={},n=e.split("&"),o=0,i=n.length;o<i;++o)t=n[o],r=t.indexOf("="),r==-1?s[decodeURIComponent(t)]="":s[decodeURIComponent(t.slice(0,r))]=decodeURIComponent(t.slice(r+1));return s}function parseHeader(e){var t,r,s,n,o=e.split(/\r?\n/),i={};o.pop();for(var u=0,a=o.length;u<a;++u)r=o[u],t=r.indexOf(":"),s=r.slice(0,t).toLowerCase(),n=trim(r.slice(t+1)),i[s]=n;return i}function isJSON(e){return/[\/+]json\b/.test(e)}function Response(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=parseHeader(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function Request(e,t){var r=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e=null,t=null;try{t=new Response(r)}catch(t){return e=new Error("Parser is unable to parse the response"),e.parse=!0,e.original=t,r.xhr?(e.rawResponse="undefined"==typeof r.xhr.responseType?r.xhr.responseText:r.xhr.response,e.status=r.xhr.status?r.xhr.status:null,e.statusCode=e.status):(e.rawResponse=null,e.status=null),r.callback(e)}r.emit("response",t);var s;try{r._isResponseOK(t)||(s=new Error(t.statusText||"Unsuccessful HTTP response"),s.original=e,s.response=t,s.status=t.status)}catch(e){s=e}s?r.callback(s,t):r.callback(null,t)})}function del(e,t,r){var s=request("DELETE",e);return"function"==typeof t&&(r=t,t=null),t&&s.send(t),r&&s.end(r),s}var root;"undefined"!=typeof window?root=window:"undefined"!=typeof self?root=self:(console.warn("Using browser-only version of superagent in non-browser environment"),root=this);var Emitter=_dereq_("emitter"),RequestBase=_dereq_("./request-base"),isObject=_dereq_("./is-object"),isFunction=_dereq_("./is-function"),ResponseBase=_dereq_("./response-base"),shouldRetry=_dereq_("./should-retry"),request=exports=module.exports=function(e,t){return"function"==typeof t?new exports.Request("GET",e).end(t):1==arguments.length?new exports.Request("GET",e):new exports.Request(e,t)};exports.Request=Request,request.getXHR=function(){if(!(!root.XMLHttpRequest||root.location&&"file:"==root.location.protocol&&root.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only verison of superagent could not find XHR")};var trim="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};request.serializeObject=serialize,request.parseString=parseString,request.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},request.serialize={"application/x-www-form-urlencoded":serialize,"application/json":JSON.stringify},request.parse={"application/x-www-form-urlencoded":parseString,"application/json":JSON.parse},ResponseBase(Response.prototype),Response.prototype._parseBody=function(e){var t=request.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&isJSON(this.type)&&(t=request.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},Response.prototype.toError=function(){var e=this.req,t=e.method,r=e.url,s="cannot "+t+" "+r+" ("+this.status+")",n=new Error(s);return n.status=this.status,n.method=t,n.url=r,n},request.Response=Response,Emitter(Request.prototype),RequestBase(Request.prototype),Request.prototype.type=function(e){return this.set("Content-Type",request.types[e]||e),this},Request.prototype.accept=function(e){return this.set("Accept",request.types[e]||e),this},Request.prototype.auth=function(e,t,r){switch(r||(r={type:"function"==typeof btoa?"basic":"auto"}),r.type){case"basic":this.set("Authorization","Basic "+btoa(e+":"+t));break;case"auto":this.username=e,this.password=t}return this},Request.prototype.query=function(e){return"string"!=typeof e&&(e=serialize(e)),e&&this._query.push(e),this},Request.prototype.attach=function(e,t,r){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,r||t.name)}return this},Request.prototype._getFormData=function(){return this._formData||(this._formData=new root.FormData),this._formData},Request.prototype.callback=function(e,t){if(this._maxRetries&&this._retries++<this._maxRetries&&shouldRetry(e,t))return this._retry();var r=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),r(e,t)},Request.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},Request.prototype.buffer=Request.prototype.ca=Request.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},Request.prototype.pipe=Request.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},Request.prototype._appendQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._sort){var t=this.url.indexOf("?");if(t>=0){var r=this.url.substring(t+1).split("&");isFunction(this._sort)?r.sort(this._sort):r.sort(),this.url=this.url.substring(0,t)+"?"+r.join("&")}}},Request.prototype._isHost=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},Request.prototype.end=function(e){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||noop,this._appendQueryString(),this._end()},Request.prototype._end=function(){var e=this,t=this.xhr=request.getXHR(),r=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var r=t.readyState;if(r>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4==r){var s;try{s=t.status}catch(e){s=0}if(!s){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var s=function(t,r){r.total>0&&(r.percent=r.loaded/r.total*100),r.direction=t,e.emit("progress",r)};if(this.hasListeners("progress"))try{t.onprogress=s.bind(null,"download"),t.upload&&(t.upload.onprogress=s.bind(null,"upload"))}catch(e){}try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof r&&!this._isHost(r)){var n=this._header["content-type"],o=this._serializer||request.serialize[n?n.split(";")[0]:""];!o&&isJSON(n)&&(o=request.serialize["application/json"]),o&&(r=o(r))}for(var i in this.header)null!=this.header[i]&&t.setRequestHeader(i,this.header[i]);return this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send("undefined"!=typeof r?r:null),this},request.get=function(e,t,r){var s=request("GET",e);return"function"==typeof t&&(r=t,t=null),t&&s.query(t),r&&s.end(r),s},request.head=function(e,t,r){var s=request("HEAD",e);return"function"==typeof t&&(r=t,t=null),t&&s.send(t),r&&s.end(r),s},request.options=function(e,t,r){var s=request("OPTIONS",e);return"function"==typeof t&&(r=t,t=null),t&&s.send(t),r&&s.end(r),s},request.del=del,request.delete=del,request.patch=function(e,t,r){var s=request("PATCH",e);return"function"==typeof t&&(r=t,t=null),t&&s.send(t),r&&s.end(r),s},request.post=function(e,t,r){var s=request("POST",e);return"function"==typeof t&&(r=t,t=null),t&&s.send(t),r&&s.end(r),s},request.put=function(e,t,r){var s=request("PUT",e);return"function"==typeof t&&(r=t,t=null),t&&s.send(t),r&&s.end(r),s};
},{"./is-function":3,"./is-object":4,"./request-base":5,"./response-base":6,"./should-retry":7,"emitter":1}],3:[function(_dereq_,module,exports){
function isFunction(t){var e=isObject(t)?Object.prototype.toString.call(t):"";return"[object Function]"===e}var isObject=_dereq_("./is-object");module.exports=isFunction;

},{"./is-object":4}],4:[function(_dereq_,module,exports){
function isObject(e){return null!==e&&"object"==typeof e}module.exports=isObject;

},{}],5:[function(_dereq_,module,exports){
function RequestBase(e){if(e)return mixin(e)}function mixin(e){for(var t in RequestBase.prototype)e[t]=RequestBase.prototype[t];return e}var isObject=_dereq_("./is-object");module.exports=RequestBase,RequestBase.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},RequestBase.prototype.parse=function(e){return this._parser=e,this},RequestBase.prototype.responseType=function(e){return this._responseType=e,this},RequestBase.prototype.serialize=function(e){return this._serializer=e,this},RequestBase.prototype.timeout=function(e){return e&&"object"==typeof e?("undefined"!=typeof e.deadline&&(this._timeout=e.deadline),"undefined"!=typeof e.response&&(this._responseTimeout=e.response),this):(this._timeout=e,this._responseTimeout=0,this)},RequestBase.prototype.retry=function(e){return 0!==arguments.length&&e!==!0||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this},RequestBase.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},RequestBase.prototype.then=function(e,t){if(!this._fullfilledPromise){var s=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(e,t){s.end(function(s,i){s?t(s):e(i)})})}return this._fullfilledPromise.then(e,t)},RequestBase.prototype.catch=function(e){return this.then(void 0,e)},RequestBase.prototype.use=function(e){return e(this),this},RequestBase.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},RequestBase.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},RequestBase.prototype.get=function(e){return this._header[e.toLowerCase()]},RequestBase.prototype.getHeader=RequestBase.prototype.get,RequestBase.prototype.set=function(e,t){if(isObject(e)){for(var s in e)this.set(s,e[s]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},RequestBase.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},RequestBase.prototype.field=function(e,t){if(null===e||void 0===e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),isObject(e)){for(var s in e)this.field(s,e[s]);return this}if(Array.isArray(t)){for(var i in t)this.field(e,t[i]);return this}if(null===t||void 0===t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},RequestBase.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},RequestBase.prototype.withCredentials=function(){return this._withCredentials=!0,this},RequestBase.prototype.redirects=function(e){return this._maxRedirects=e,this},RequestBase.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},RequestBase.prototype.send=function(e){var t=isObject(e),s=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&isObject(this._data))for(var i in e)this._data[i]=e[i];else"string"==typeof e?(s||this.type("form"),s=this._header["content-type"],"application/x-www-form-urlencoded"==s?this._data=this._data?this._data+"&"+e:e:this._data=(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(s||this.type("json"),this)},RequestBase.prototype.sortQuery=function(e){return this._sort="undefined"==typeof e||e,this},RequestBase.prototype._timeoutError=function(e,t){if(!this._aborted){var s=new Error(e+t+"ms exceeded");s.timeout=t,s.code="ECONNABORTED",this.timedout=!0,this.abort(),this.callback(s)}},RequestBase.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){e._timeoutError("Timeout of ",e._timeout)},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){e._timeoutError("Response timeout of ",e._responseTimeout)},this._responseTimeout))};
},{"./is-object":4}],6:[function(_dereq_,module,exports){
function ResponseBase(t){if(t)return mixin(t)}function mixin(t){for(var e in ResponseBase.prototype)t[e]=ResponseBase.prototype[e];return t}var utils=_dereq_("./utils");module.exports=ResponseBase,ResponseBase.prototype.get=function(t){return this.header[t.toLowerCase()]},ResponseBase.prototype._setHeaderProperties=function(t){var e=t["content-type"]||"";this.type=utils.type(e);var s=utils.params(e);for(var i in s)this[i]=s[i];this.links={};try{t.link&&(this.links=utils.parseLinks(t.link))}catch(t){}},ResponseBase.prototype._setStatusProperties=function(t){var e=t/100|0;this.status=this.statusCode=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.redirect=3==e,this.clientError=4==e,this.serverError=5==e,this.error=(4==e||5==e)&&this.toError(),this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.forbidden=403==t,this.notFound=404==t};

},{"./utils":8}],7:[function(_dereq_,module,exports){
var ERROR_CODES=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];module.exports=function(E,O){return!!(E&&E.code&&~ERROR_CODES.indexOf(E.code))||(!!(O&&O.status&&O.status>=500)||!!(E&&"timeout"in E&&"ECONNABORTED"==E.code))};

},{}],8:[function(_dereq_,module,exports){
exports.type=function(e){return e.split(/ *; */).shift()},exports.params=function(e){return e.split(/ *; */).reduce(function(e,t){var n=t.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(e[r]=i),e},{})},exports.parseLinks=function(e){return e.split(/ *, */).reduce(function(e,t){var n=t.split(/ *; */),r=n[0].slice(1,-1),i=n[1].split(/ *= */)[1].slice(1,-1);return e[i]=r,e},{})},exports.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&delete e.cookie,e};
},{}],9:[function(_dereq_,module,exports){
GHInput=function(t,n){this.set(t,n)},GHInput.prototype.round=function(t,n){return void 0===n&&(n=1e6),Math.round(t*n)/n},GHInput.prototype.setCoord=function(t,n){this.lat=this.round(t),this.lng=this.round(n),this.input=this.toString()},GHInput.isObject=function(t){var n=Object.prototype.toString.call(t);return"[object object]"===n.toLowerCase()},GHInput.isString=function(t){var n=Object.prototype.toString.call(t);return"[object string]"===n.toLowerCase()},GHInput.prototype.set=function(t,n){if(n)return void this.setCoord(t,n);if(this.input=t,GHInput.isObject(t))this.setCoord(t.lat,t.lng);else if(GHInput.isString(t)){var o=t.indexOf(",");o>=0&&(this.lat=this.round(parseFloat(t.substr(0,o))),this.lng=this.round(parseFloat(t.substr(o+1))))}},GHInput.prototype.toString=function(){if(void 0!==this.lat&&void 0!==this.lng)return this.lat+","+this.lng},module.exports=GHInput;

},{}],10:[function(_dereq_,module,exports){
var GHUtil=function(){};GHUtil.prototype.clone=function(r){var e={};for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o]);return e},GHUtil.prototype.copyProperties=function(r,e){if(!r)return e;for(var o in r)r.hasOwnProperty(o)&&void 0!==r[o]&&(e[o]=r[o]);return e},GHUtil.prototype.decodePath=function(r,e){for(var o=r.length,t=0,a=[],i=0,n=0,p=0;t<o;){var l,s=0,d=0;do l=r.charCodeAt(t++)-63,d|=(31&l)<<s,s+=5;while(l>=32);var u=1&d?~(d>>1):d>>1;i+=u,s=0,d=0;do l=r.charCodeAt(t++)-63,d|=(31&l)<<s,s+=5;while(l>=32);var c=1&d?~(d>>1):d>>1;if(n+=c,e){s=0,d=0;do l=r.charCodeAt(t++)-63,d|=(31&l)<<s,s+=5;while(l>=32);var h=1&d?~(d>>1):d>>1;p+=h,a.push([1e-5*n,1e-5*i,p/100])}else a.push([1e-5*n,1e-5*i])}return a},GHUtil.prototype.extractError=function(r,e){var o;r&&r.body?(o=r.body,o.message&&(o=o.message)):o=r;var t="Error for "+e;return{message:o,details:t}},module.exports=GHUtil;
},{}],11:[function(_dereq_,module,exports){
var request=_dereq_("superagent"),GHUtil=_dereq_("./GHUtil"),ghUtil=new GHUtil;GraphHopperGeocoding=function(t){this.location_bias,this.query,this.host="https://graphhopper.com/api/1",this.debug=!1,this.locale="en",this.basePath="/geocode",this.timeout=5e3,ghUtil.copyProperties(t,this)},GraphHopperGeocoding.prototype.clearLocation=function(){this.location_bias=void 0},GraphHopperGeocoding.prototype.getParametersAsQueryString=function(t){var e="locale="+t.locale;return t.query?(e+="&q="+encodeURIComponent(t.query),t.location_bias?e+="&point="+encodeURIComponent(t.location_bias.toString()):t.point&&(e+="&point="+encodeURIComponent(t.point.toString()))):(e+="&reverse=true",t.point&&(e+="&point="+encodeURIComponent(t.point.toString()))),t.debug&&(e+="&debug=true"),t.limit&&(e+="&limit="+t.limit),e},GraphHopperGeocoding.prototype.doRequest=function(t,e){var o=this,i=ghUtil.clone(o);e&&(i=ghUtil.copyProperties(e,i));var r=i.host+i.basePath+"?"+this.getParametersAsQueryString(i)+"&key="+i.key;request.get(r).accept("application/json").timeout(i.timeout).end(function(e,o){e||!o.ok?t(ghUtil.extractError(o,r)):o&&t(o.body)})},module.exports=GraphHopperGeocoding;

},{"./GHUtil":10,"superagent":2}],12:[function(_dereq_,module,exports){
var request=_dereq_("superagent"),GHUtil=_dereq_("./GHUtil"),ghUtil=new GHUtil;GraphHopperIsochrone=function(t){this.time_limit=600,this.buckets=3,this.vehicle="car",this.point,this.host="https://graphhopper.com/api/1",this.debug=!1,this.basePath="/isochrone",this.timeout=5e3,ghUtil.copyProperties(t,this)},GraphHopperIsochrone.prototype.getParametersAsQueryString=function(t){var e="point="+t.point;return e+="&time_limit="+t.time_limit,e+="&buckets="+t.buckets,e+="&vehicle="+t.vehicle,t.debug&&(e+="&debug=true"),e},GraphHopperIsochrone.prototype.doRequest=function(t,e){var i=this,r=ghUtil.clone(i);e&&(r=ghUtil.copyProperties(e,r));var o=r.host+r.basePath+"?"+this.getParametersAsQueryString(r)+"&key="+r.key;request.get(o).accept("application/json").timeout(r.timeout).end(function(e,i){e||!i.ok?t(ghUtil.extractError(i,o)):i&&t(i.body)})},module.exports=GraphHopperIsochrone;

},{"./GHUtil":10,"superagent":2}],13:[function(_dereq_,module,exports){
var request=_dereq_("superagent"),GHUtil=_dereq_("./GHUtil"),ghUtil=new GHUtil;GraphHopperMapMatching=function(e){this.host="https://graphhopper.com/api/1",this.vehicle="car",this.gps_accuracy=20,this.max_visited_nodes=3e3,this.debug=!1,this.data_type="json",this.locale="en",this.points_encoded=!0,this.instructions=!0,this.elevation=!0,this.basePath="/match",this.timeout=2e4,ghUtil.copyProperties(e,this)},GraphHopperMapMatching.prototype.getParametersAsQueryString=function(e){var t="locale="+e.locale;return e.debug&&(t+="&debug=true"),t+="&gps_accuracy="+e.gps_accuracy,t+="&max_visited_nodes="+e.max_visited_nodes,t+="&type="+e.data_type,e.instructions&&(t+="&instructions="+e.instructions),e.points_encoded&&(t+="&points_encoded="+e.points_encoded),e.elevation&&(t+="&elevation="+e.elevation),e.vehicle&&(t+="&vehicle="+e.vehicle),t},GraphHopperMapMatching.prototype.doRequest=function(e,t,i){var o=this,a=ghUtil.clone(o);i&&(a=ghUtil.copyProperties(i,a));var s=a.host+a.basePath+"?"+o.getParametersAsQueryString(a);a.key&&(s+="&key="+a.key),request.post(s).send(e).accept("application/json").type("application/xml").timeout(a.timeout).end(function(e,i){if(e||!i.ok)t(ghUtil.extractError(i,s));else if(i){if(i.body.paths)for(var a=0;a<i.body.paths.length;a++){var n=i.body.paths[a];if(n.points_encoded){var p=ghUtil.decodePath(n.points,o.elevation);n.points={type:"LineString",coordinates:p},delete n.snapped_waypoints}}t(i.body)}})},module.exports=GraphHopperMapMatching;

},{"./GHUtil":10,"superagent":2}],14:[function(_dereq_,module,exports){
var request=_dereq_("superagent"),GHUtil=_dereq_("./GHUtil"),ghUtil=new GHUtil;GraphHopperMatrix=function(t){this.host="https://graphhopper.com/api/1",this.vehicle="car",this.debug=!1,this.data_type="application/json",this.from_points=[],this.to_points=[],this.out_arrays=[],this.basePath="/matrix",this.graphhopper_maps_host="https://graphhopper.com/maps/?",this.timeout=3e4,ghUtil.copyProperties(t,this)},GraphHopperMatrix.prototype.addPoint=function(t){this.addFromPoint(t),this.addToPoint(t)},GraphHopperMatrix.prototype.addFromPoint=function(t){this.from_points.push(t)},GraphHopperMatrix.prototype.addToPoint=function(t){this.to_points.push(t)},GraphHopperMatrix.prototype.clearPoints=function(){this.from_points.length=0,this.to_points.length=0},GraphHopperMatrix.prototype.addOutArray=function(t){this.out_arrays.push(t)},GraphHopperMatrix.prototype.doRequest=function(t,o){var r=this,i=ghUtil.clone(r);o&&(i=ghUtil.copyProperties(o,i));var p=i.host+i.basePath+"?vehicle="+i.vehicle+"&key="+i.key;for(var e in i.from_points){var a=i.from_points[e];p+="&from_point="+encodeURIComponent(a.toString())}for(var e in i.to_points){var a=i.to_points[e];p+="&to_point="+encodeURIComponent(a.toString())}if(i.out_arrays)for(var e in i.out_arrays){var n=i.out_arrays[e];p+="&out_array="+n}i.debug&&(p+="&debug=true"),request.get(p).accept(i.data_type).timeout(i.timeout).end(function(o,r){o||!r.ok?t(ghUtil.extractError(r,p)):r&&t(r.body)})},GraphHopperMatrix.prototype.toHtmlTable=function(t){var o="<table border='1' cellpadding='10'>";o+="<tr>",o+="<td>&#8595; from &#92; to &#8594;</td>";for(var r in this.to_points)o+="<td><b>"+this.to_points[r]+"</b></td>";o+="</tr>";for(var i in t){o+="<tr>",o+="<td><b>"+this.from_points[i]+"</b></td>";var p=t[i];for(var r in p){var e=this.graphhopper_maps_host+"point="+encodeURIComponent(this.from_points[i])+"&point="+encodeURIComponent(this.to_points[r])+"&vehicle="+this.vehicle;o+="<td> <a href='"+e+"'>"+p[r]+"</a> </td>"}o+="</tr>\n"}return o+="</table>"},module.exports=GraphHopperMatrix;

},{"./GHUtil":10,"superagent":2}],15:[function(_dereq_,module,exports){
var request=_dereq_("superagent"),GHUtil=_dereq_("./GHUtil"),ghUtil=new GHUtil;GraphHopperOptimization=function(e){this.points=[],this.host="https://graphhopper.com/api/1",this.key=e.key,this.profile=e.profile,this.basePath="/vrp",this.waitInMillis=1e3,this.timeout=5e3,this.postTimeout=8e3,ghUtil.copyProperties(e,this)},GraphHopperOptimization.prototype.addPoint=function(e){this.points.push(e)},GraphHopperOptimization.prototype.clear=function(){this.points.length=0},GraphHopperOptimization.prototype.doTSPRequest=function(e){this.doVRPRequest(e,1)},GraphHopperOptimization.prototype.doVRPRequest=function(e,i){var t=this,s=t.points[0],r=[];for(var o in t.points)if(!(o<1)){var a=t.points[o],n={id:"_"+o,type:"pickup",name:"maintenance "+o,address:{location_id:"_location_"+o,lon:a.lng,lat:a.lat}};r.push(n)}for(var p=[],d=0;d<i;d++)p.push({vehicle_id:"_vehicle_"+d,start_address:{location_id:"_start_location",lon:s.lng,lat:s.lat},type_id:"_vtype_1"});var l={algorithm:{problem_type:"min-max"},vehicles:p,vehicle_types:[{type_id:"_vtype_1",profile:this.profile}],services:r};t.doRequest(l,e)},GraphHopperOptimization.prototype.doRawRequest=function(e,i,t){var s=this,r=ghUtil.clone(s);t&&(r=ghUtil.copyProperties(t,r));var o=r.host+r.basePath+"/optimize?key="+r.key;request.post(o).send(JSON.stringify(e)).accept("application/json; charset=utf-8").type("application/json").timeout(r.postTimeout).end(function(e,t){if(e||!t.ok)i(ghUtil.extractError(t,o));else if(t){var a,n=r.host+r.basePath+"/solution/"+t.body.job_id+"?key="+r.key,p=function(){request.get(n).accept("application/json").timeout(r.timeout).end(function(e,t){e||!t.ok||void 0===t.body?(clearInterval(a),i(ghUtil.extractError(t,o))):t&&("finished"===t.body.status?(clearInterval(a),i(t.body)):t.body.message&&(clearInterval(a),i(t.body)))})};s.waitInMillis>0?a=setInterval(p,s.waitInMillis):p()}})},GraphHopperOptimization.prototype.doRequest=function(e,i,t){var s={},r={},o={},a={},n={},p={};if(e.vehicle_types)for(var d=0;d<e.vehicle_types.length;d++){var l=e.vehicle_types[d];s[l.type_id]=l.profile,r[l.type_id]=l}if(e.services)for(var h=0;h<e.services.length;h++){var c=e.services[h];p[c.address.location_id]=c.address,a[c.id]=c}if(e.shipments)for(var v=0;v<e.shipments.length;v++){var u=e.shipments[v];p[u.pickup.address.location_id]=u.pickup.address,p[u.delivery.address.location_id]=u.delivery.address,n[u.id]=u}var _={},y={};if(e.vehicles)for(var f=0;f<e.vehicles.length;f++){var m=e.vehicles[f];y[m.vehicle_id]=m;var g=null;if(null!==m.type_id?(g=s[m.type_id],null!==g?o[m.vehicle_id]=g:o[m.vehicle_id]="car"):o[m.vehicle_id]="car",m.start_address&&(p[m.start_address.location_id]=m.start_address),m.end_address&&(p[m.end_address.location_id]=m.end_address),m.break){var b=m.vehicle_id+"_break";_[b]=m.break}}var k=function(e){if(e.solution){var t=e.solution;e.raw_solution=JSON.parse(JSON.stringify(t));for(var s=0;s<t.routes.length;s++){var d=t.routes[s],l=d.vehicle_id,h=o[l];d.profile=h;for(var c=0;c<d.activities.length;c++){var v=d.activities[c];if(v.address=p[v.location_id],v.id){var u=_[v.id];u?v.break=_[v.id]:a[v.id]?v.service=a[v.id]:n[v.id]&&(v.shipment=n[v.id])}else{var f=y[l];v.vehicle=f,v.vehicle_type=r[f.type_id]}}}for(var m=new Array,g=0;g<t.unassigned.services.length;g++){var b=t.unassigned.services[g];m.push(a[b])}t.unassigned_services=m;for(var k=new Array,g=0;g<t.unassigned.shipments.length;g++){var q=t.unassigned.shipments[g];k.push(n[q])}t.unassigned_shipments=k}i(e)};this.doRawRequest(e,k,t)},module.exports=GraphHopperOptimization;

},{"./GHUtil":10,"superagent":2}],16:[function(_dereq_,module,exports){
var request=_dereq_("superagent"),request=_dereq_("superagent"),GHUtil=_dereq_("./GHUtil"),ghUtil=new GHUtil;GraphHopperRouting=function(t){this.points=[],this.host="https://graphhopper.com/api/1",this.vehicle="car",this.debug=!1,this.data_type="application/json",this.locale="en",this.points_encoded=!0,this.instructions=!0,this.elevation=!1,this.optimize="false",this.basePath="/route",this.timeout=5e3,this.graphhopper_maps_host="https://graphhopper.com/maps/?",this.turn_sign_map={"-6":"leave roundabout","-3":"turn sharp left","-2":"turn left","-1":"turn slight left",0:"continue",1:"turn slight right",2:"turn right",3:"turn sharp right",4:"finish",5:"reached via point",6:"enter roundabout"},ghUtil.copyProperties(t,this)},GraphHopperRouting.prototype.clearPoints=function(){this.points.length=0},GraphHopperRouting.prototype.addPoint=function(t){this.points.push(t)},GraphHopperRouting.prototype.getParametersAsQueryString=function(t){var e="locale="+t.locale;for(var i in t.points){var o=t.points[i];e+="&point="+encodeURIComponent(o.toString())}return t.debug&&(e+="&debug=true"),e+="&type="+t.data_type,t.instructions&&(e+="&instructions="+t.instructions),t.points_encoded&&(e+="&points_encoded="+t.points_encoded),t.elevation&&(e+="&elevation="+t.elevation),t.optimize&&(e+="&optimize="+t.optimize),t.vehicle&&(e+="&vehicle="+t.vehicle),e},GraphHopperRouting.prototype.doRequest=function(t,e){var i=this,o=ghUtil.clone(i);e&&(o=ghUtil.copyProperties(e,o));var r=o.host+o.basePath+"?"+i.getParametersAsQueryString(o)+"&key="+o.key;request.get(r).accept(o.data_type).timeout(o.timeout).end(function(e,o){if(e||!o.ok)t(ghUtil.extractError(o,r));else if(o){if(o.body.paths)for(var n=0;n<o.body.paths.length;n++){var p=o.body.paths[n];if(p.points_encoded){var s=ghUtil.decodePath(p.points,i.elevation);p.points={type:"LineString",coordinates:s};var a=ghUtil.decodePath(p.snapped_waypoints,i.elevation);p.snapped_waypoints={type:"LineString",coordinates:a}}}t(o.body)}})},GraphHopperRouting.prototype.getGraphHopperMapsLink=function(){return this.graphhopper_maps_host+this.getParametersAsQueryString(this)},GraphHopperRouting.prototype.getTurnText=function(t){return this.turn_sign_map[t]},module.exports=GraphHopperRouting;

},{"./GHUtil":10,"superagent":2}],17:[function(_dereq_,module,exports){
var GHUtil=_dereq_("./GHUtil.js"),GHInput=_dereq_("./GHInput.js"),GraphHopperGeocoding=_dereq_("./GraphHopperGeocoding.js"),GraphHopperIsochrone=_dereq_("./GraphHopperIsochrone.js"),GraphHopperMapMatching=_dereq_("./GraphHopperMapMatching.js"),GraphHopperMatrix=_dereq_("./GraphHopperMatrix.js"),GraphHopperOptimization=_dereq_("./GraphHopperOptimization.js"),GraphHopperRouting=_dereq_("./GraphHopperRouting.js"),GraphHopper={Util:GHUtil,Input:GHInput,Geocoding:GraphHopperGeocoding,Isochrone:GraphHopperIsochrone,MapMatching:GraphHopperMapMatching,Optimization:GraphHopperOptimization,Routing:GraphHopperRouting,Matrix:GraphHopperMatrix};"object"==typeof module&&"object"==typeof module.exports?module.exports.GraphHopper=GraphHopper:"function"==typeof define&&define.amd&&define(GraphHopper),"undefined"!=typeof window&&(window.GraphHopper=GraphHopper);
},{"./GHInput.js":9,"./GHUtil.js":10,"./GraphHopperGeocoding.js":11,"./GraphHopperIsochrone.js":12,"./GraphHopperMapMatching.js":13,"./GraphHopperMatrix.js":14,"./GraphHopperOptimization.js":15,"./GraphHopperRouting.js":16}]},{},[17]);
